---
layout: menu
title: "HTB AI"
description: "10.10.10.163 | 30 pts"
header-img: "boxes/screenshots/14_ai/ai.png"
tags: [hackthebox, htb, boot2root, writeup, linux, php, str_replace, ssh, private key, private key authentication, sqli, linux capabilities, capabilities, sbin, getcap, ai]
---

# HTB AI (10.10.10.163) MACHINE WRITE-UP

![80 AI Icon](./screenshots/14_ai/80_icon.png)
---

### TABLE OF CONTENTS
* [PART 1 : INITIAL RECON](#part-1--initial-recon)
* [PART 2 : PORT ENUMERATION](#part-2--port-enumeration)
  * [TCP PORT 80 (http)](#tcp-port-80-http)
* [PART 3 : EXPLOITATION](#part-3--exploitation)
* [PART 4 : GENERATE USER SHELL](#part-4--generate-user-shell)
* [PART 5 : LATERAL MOVEMENT (nobody -&gt; monitor)](#part-5--lateral-movement-nobody---monitor)
* [PART 6 : PRIVILEGE ESCALATION (monitor -&gt; root)](#part-6--privilege-escalation-monitor---root)

---

## PART 1 : INITIAL RECON

As usual, we begin with our nmap scan using defult scripts and enumerate versions.

```console
# nmap -sC -sV -oA nmap/ai 10.10.10.163
Starting Nmap 7.80 ( https://nmap.org ) at 2020-02-04 00:41 EST
Nmap scan report for 10.10.10.163
Host is up (0.18s latency).
Not shown: 998 closed ports
PORT   STATE SERVICE VERSION
22/tcp open  ssh     OpenSSH 7.6p1 Ubuntu 4ubuntu0.3 (Ubuntu Linux; protocol 2.0)
| ssh-hostkey:
|   2048 6d:16:f4:32:eb:46:ca:37:04:d2:a5:aa:74:ed:ab:fc (RSA)
|   256 78:29:78:d9:f5:43:d1:cf:a0:03:55:b1:da:9e:51:b6 (ECDSA)
|_  256 85:2e:7d:66:30:a6:6e:30:04:82:c1:ae:ba:a4:99:bd (ED25519)
80/tcp open  http    Apache httpd 2.4.29 ((Ubuntu))
|_http-server-header: Apache/2.4.29 (Ubuntu)
|_http-title: Hello AI!
Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel
```

__Notes__:
- We only have two ports open, __SSH__ on Port __22__ and its banner tells us its an __Ubuntu server__, we also have __http__ on port __80__ and its banner tells us its running __Apache httpd 2.4.29__.

- Since we don't get much from nmap, lets navigate to the actual page

---

## PART 2 : PORT ENUMERATION

### TCP PORT 80 (http)

- __`http://10.10.10.163`__:

Opening __http://10.10.10.163__ we get a page and if we go to the top left we get a menu

![80 AI Icon](./screenshots/14_ai/80_landing_page.png)

- Now i am intrested in the source too to see if i can get a clue as to what i this is. I dont recongoise any of the source :( so lets have a look at the pages.
- Opening the pages I notice they have a php extension. Great now it's a good time to have a recon running on the background.

- Clicking through the pages : about.php says they are doing something with voice recognition form audio files. and then we have drop your queries using wav files.

![80 AI Icon](./screenshots/14_ai/drop_your_queries.png)

- Great, lets make a simple php file to test this out since we already know this site is based on php.

```console
<?php echo("Check out my blog"); ?>
```
- Testing this out:

![80 AI Icon](./screenshots/14_ai/test_php.png)
- __Tip__ I always try basic scripts first instead of diving into reverse shell because if they have php safe mode enabled they may block your scripts. Go for something like echo ;).

```console
alexa@AI:/var/www/html$ cat db.php 
<?php
$conn = new mysqli('localhost','dbuser','toor','alexa');
if (mysqli_connect_errno())
  {
  echo "Failed to connect to MySQL: " . mysqli_connect_error();
  }
?>
alexa@AI:/var/www/html$ client_loop: send disconnect: Broken pipe
```
